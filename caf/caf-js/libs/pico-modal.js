// PicoModal
(function(e,g){function h(l){if(typeof Node==="object"){return l instanceof Node}else{return l&&typeof l==="object"&&typeof l.nodeType==="number"}}function d(l){return typeof l==="string"}function c(){var l=[];return{watch:l.push.bind(l),trigger:function(q){var m=true;var p={preventDefault:function n(){m=false}};for(var o=0;o<l.length;o++){l[o](q,p)}return m}}}function f(l){this.elem=l}f.div=function(l){var m=g.createElement("div");(l||g.body).appendChild(m);return new f(m)};f.prototype={child:function(){return f.div(this.elem)},stylize:function(l){l=l||{};if(typeof l.opacity!=="undefined"){l.filter="alpha(opacity="+(l.opacity*100)+")"}for(var m in l){if(l.hasOwnProperty(m)){this.elem.style[m]=l[m]}}return this},clazz:function(l){this.elem.className+=" "+l;return this},html:function(l){if(h(l)){this.elem.appendChild(l)}else{this.elem.innerHTML=l}return this},getWidth:function(){return this.elem.clientWidth},onClick:function(l){if(this.elem.attachEvent){this.elem.attachEvent("onclick",l)}else{this.elem.addEventListener("click",l)}return this},destroy:function(){g.body.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},anyAncestor:function(l){var m=this.elem;while(m){if(l(new f(m))){return true}else{m=m.parentNode}}return false}};function k(l,m){return f.div().clazz("pico-overlay").clazz(l("overlayClass","")).stylize({display:"block",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:10000}).stylize(l("overlayStyles",{opacity:0.5,background:"#000"})).onClick(function(){if(l("overlayClose",true)){m()}})}function i(l,o){var n=f.div().clazz("pico-content").clazz(l("modalClass","")).stylize({display:"block",position:"fixed",zIndex:10001,left:"50%",top:"50px"}).html(l("content")).onClick(function(q){var p=new f(q.target).anyAncestor(function(r){return/\bpico-close\b/.test(r.elem.className)});if(p){o()}});var m=l("width",n.getWidth());n.stylize({width:m+"px",margin:"0 0 0 "+(-(m/2)+"px")}).stylize(l("modalStyles",{backgroundColor:"white",padding:"20px",borderRadius:"5px"}));return n}function j(m,l){if(l("closeButton",true)){return m.child().html(l("closeHtml","&#xD7;")).clazz("pico-close").clazz(l("closeClass")).stylize(l("closeStyles",{borderRadius:"2px",cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"}))}}function b(l){return function(){return l().elem}}function a(A){if(d(A)||h(A)){A={content:A}}var t=c();var w=c();var m=c();var p=c();var s=c();function l(C,B){var D=A[C];if(typeof D==="function"){D=D(B)}return D===undefined?B:D}function z(){o().hide();r().hide();s.trigger(q)}function y(){if(p.trigger(q)){z()}}function v(B){return function(){B.apply(this,arguments);return q}}var n;function x(B){if(!n){var C=i(l,y);n={modal:C,overlay:k(l,y),close:j(C,l)};t.trigger(q)}return n[B]}var r=x.bind(e,"modal");var o=x.bind(e,"overlay");var u=x.bind(e,"close");var q={modalElem:b(r),closeElem:b(u),overlayElem:b(o),show:function(){if(w.trigger(q)){o().show();u();r().show();m.trigger(q)}return this},close:v(y),forceClose:v(z),destroy:function(){r=r().destroy();o=o().destroy();u=undefined},options:function(B){A=B},afterCreate:v(t.watch),beforeShow:v(w.watch),afterShow:v(m.watch),beforeClose:v(p.watch),afterClose:v(s.watch)};return q}if(typeof e.define==="function"&&e.define.amd){e.define(function(){return a})}else{e.picoModal=a}}(window,document));
